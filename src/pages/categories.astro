---
import Layout from '@/layouts/Layout.astro';
import ToolGrid from '@/components/ToolGrid.astro';
import { getToolCategories, getToolsByCategory } from '@/utils/toolData';

const categories = getToolCategories();
---

<Layout title="工具分类 - 工具门户网站" description="按分类浏览工具">
  <main class="main">
    <div class="container">
      <header class="header">
        <h1 class="header__title">工具分类</h1>
        <p class="header__description">按分类浏览所有工具</p>
      </header>

      {categories.map((category) => {
        const tools = getToolsByCategory(category.id);
        if (tools.length === 0) return null;
        
        return (
          <section class="category-section">
            <div class="category-header">
              <div class="category-info">
                <span class="category-icon">{category.icon}</span>
                <div>
                  <h2 class="category-title">{category.name}</h2>
                  <p class="category-description">{category.description}</p>
                </div>
              </div>
              <span class="category-count">{tools.length} 个工具</span>
            </div>
            <ToolGrid tools={tools} columns="auto" gap="md" />
          </section>
        );
      })}
    </div>
  </main>
</Layout>

<style>
  .main {
    min-height: 100vh;
    padding: var(--space-3xl) 0;
  }

  .container {
    max-width: var(--container-xl);
    margin: 0 auto;
    padding: 0 var(--space-lg);
  }

  .header {
    text-align: center;
    margin-bottom: var(--space-3xl);
  }

  .header__title {
    font-size: clamp(2rem, 5vw, 3rem);
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: var(--space-md);
  }

  .header__description {
    font-size: 1.125rem;
    color: var(--text-secondary);
    max-width: 600px;
    margin: 0 auto;
  }

  .category-section {
    margin-bottom: var(--space-3xl);
  }

  .category-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: var(--space-xl);
    padding-bottom: var(--space-lg);
    border-bottom: 1px solid var(--border-primary);
  }

  .category-info {
    display: flex;
    align-items: center;
    gap: var(--space-md);
  }

  .category-icon {
    font-size: 2rem;
    flex-shrink: 0;
  }

  .category-title {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0 0 var(--space-xs) 0;
  }

  .category-description {
    font-size: 0.875rem;
    color: var(--text-secondary);
    margin: 0;
  }

  .category-count {
    font-size: 0.875rem;
    color: var(--text-muted);
    background: var(--bg-secondary);
    padding: var(--space-xs) var(--space-sm);
    border-radius: var(--radius-md);
    font-weight: 500;
  }

  @media (max-width: 768px) {
    .main {
      padding: var(--space-2xl) 0;
    }

    .category-header {
      flex-direction: column;
      align-items: flex-start;
      gap: var(--space-md);
    }

    .category-info {
      gap: var(--space-sm);
    }

    .category-icon {
      font-size: 1.5rem;
    }

    .category-title {
      font-size: 1.25rem;
    }
  }

  @media (max-width: 640px) {
    .container {
      padding: 0 var(--space-md);
    }
  }
</style>