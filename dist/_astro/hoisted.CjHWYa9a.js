(function(){const r=localStorage.getItem("theme-preference"),e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",t=r||e;document.documentElement.setAttribute("data-theme",t);const h=document.querySelector('meta[name="theme-color"]');h&&h.setAttribute("content",t==="dark"?"#0f172a":"#ffffff")})();class n{static{this.STORAGE_KEY="theme-preference"}static{this.THEME_ATTRIBUTE="data-theme"}constructor(){this.systemPreference=this.getSystemPreference(),this.currentTheme=this.getStoredPreference()||this.systemPreference,this.init()}init(){this.applyTheme(),this.setupSystemThemeListener()}getSystemPreference(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}getStoredPreference(){try{return localStorage.getItem(n.STORAGE_KEY)}catch{return null}}storePreference(e){try{localStorage.setItem(n.STORAGE_KEY,e)}catch{}}applyTheme(){document.documentElement.setAttribute(n.THEME_ATTRIBUTE,this.currentTheme),this.updateMetaThemeColor()}updateMetaThemeColor(){const e=document.querySelector('meta[name="theme-color"]');if(e){const t=this.currentTheme==="dark"?"#0f172a":"#ffffff";e.setAttribute("content",t)}}setupSystemThemeListener(){const e=window.matchMedia("(prefers-color-scheme: dark)");"addEventListener"in e&&e.addEventListener("change",t=>{this.systemPreference=t.matches?"dark":"light",this.getStoredPreference()||(this.currentTheme=this.systemPreference,this.applyTheme())})}toggleTheme(){this.currentTheme=this.currentTheme==="light"?"dark":"light",this.storePreference(this.currentTheme),this.applyTheme(),this.dispatchThemeChangeEvent()}setTheme(e){this.currentTheme!==e&&(this.currentTheme=e,this.storePreference(e),this.applyTheme(),this.dispatchThemeChangeEvent())}getCurrentTheme(){return this.currentTheme}getSystemTheme(){return this.systemPreference}isUserPreference(){return this.getStoredPreference()!==null}dispatchThemeChangeEvent(){const e=new CustomEvent("themechange",{detail:{theme:this.currentTheme,isUserPreference:this.isUserPreference()}});document.dispatchEvent(e)}}class i{constructor(e,t){this.button=e,this.themeManager=t,this.init()}init(){this.updateButtonState(),this.setupEventListeners()}setupEventListeners(){this.button.addEventListener("click",()=>{this.themeManager.toggleTheme()}),document.addEventListener("themechange",()=>{this.updateButtonState()})}updateButtonState(){const e=this.themeManager.getCurrentTheme()==="dark";this.button.setAttribute("aria-pressed",e.toString()),this.button.setAttribute("title",e?"åˆ‡æ¢åˆ°æµ…è‰²æ¨¡å¼":"åˆ‡æ¢åˆ°æ·±è‰²æ¨¡å¼");const t=this.button.querySelector(".theme-toggle__icon");t&&(t.textContent=e?"â˜€ï¸":"ðŸŒ™")}}let s;function c(){if(typeof window>"u")return;s=new n;const r=document.querySelector("[data-theme-toggle]");r&&new i(r,s);const e=document.createElement("meta");e.name="theme-color",document.head.appendChild(e);const t=s.getCurrentTheme();e.content=t==="dark"?"#0f172a":"#ffffff"}c();
